"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[705],{5318:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(7378);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(t),m=r,v=d["".concat(s,".").concat(m)]||d[m]||p[m]||i;return t?a.createElement(v,l(l({ref:n},c),{},{components:t})):a.createElement(v,l({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=d;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var u=2;u<i;u++)l[u]=t[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7140:function(e,n,t){var a=t(7378);n.Z=function(e){var n=e.children,t=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:t,className:r},n)}},2828:function(e,n,t){t.d(n,{Z:function(){return d}});var a=t(5773),r=t(7378),i=t(7524),l=t(4796);var o=function(){var e=(0,r.useContext)(l.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=t(6855),u=t(8944),c="tabItem_a7dU";function p(e){var n,t,i,l=e.lazy,p=e.block,d=e.defaultValue,m=e.values,v=e.groupId,h=e.className,g=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),k=null!=m?m:g.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),f=(0,s.lx)(k,(function(e,n){return e.value===n.value}));if(f.length>0)throw new Error('Docusaurus error: Duplicate values "'+f.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var b=null===d?d:null!=(n=null!=d?d:null==(t=g.find((function(e){return e.props.default})))?void 0:t.props.value)?n:null==(i=g[0])?void 0:i.props.value;if(null!==b&&!k.some((function(e){return e.value===b})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+b+'" but none of its children has the corresponding value. Available values are: '+k.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var y=o(),N=y.tabGroupChoices,w=y.setTabGroupChoices,x=(0,r.useState)(b),E=x[0],T=x[1],C=[],j=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=v){var O=N[v];null!=O&&O!==E&&k.some((function(e){return e.value===O}))&&T(O)}var S=function(e){var n=e.currentTarget,t=C.indexOf(n),a=k[t].value;a!==E&&(j(n),T(a),null!=v&&w(v,a))},D=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a=C.indexOf(e.currentTarget)+1;t=C[a]||C[0];break;case"ArrowLeft":var r=C.indexOf(e.currentTarget)-1;t=C[r]||C[C.length-1]}null==(n=t)||n.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,u.Z)("tabs",{"tabs--block":p},h)},k.map((function(e){var n=e.value,t=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:E===n?0:-1,"aria-selected":E===n,key:n,ref:function(e){return C.push(e)},onKeyDown:D,onFocus:S,onClick:S},i,{className:(0,u.Z)("tabs__item",c,null==i?void 0:i.className,{"tabs__item--active":E===n})}),null!=t?t:n)}))),l?(0,r.cloneElement)(g.filter((function(e){return e.props.value===E}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},g.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==E})}))))}function d(e){var n=(0,i.Z)();return r.createElement(p,(0,a.Z)({key:String(n)},e))}},6033:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return u},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return d},default:function(){return v}});var a=t(5773),r=t(808),i=(t(7378),t(5318)),l=t(2828),o=t(7140),s=["components"],u={id:"as-eslint-plugin",title:"As ESLint Plugin"},c=void 0,p={unversionedId:"usage/as-eslint-plugin",id:"usage/as-eslint-plugin",title:"As ESLint Plugin",description:"Describes how to use recheck as an ESLint plugin.",source:"@site/docs/usage/as-eslint-plugin.mdx",sourceDirName:"usage",slug:"/usage/as-eslint-plugin",permalink:"/recheck/docs/usage/as-eslint-plugin",editUrl:"https://github.com/MakeNowJust-Labo/recheck/tree/main/website/docs/docs/usage/as-eslint-plugin.mdx",tags:[],version:"current",frontMatter:{id:"as-eslint-plugin",title:"As ESLint Plugin"},sidebar:"docs",previous:{title:"As Scala Library",permalink:"/recheck/docs/usage/as-scala-library"},next:{title:"Parameters",permalink:"/recheck/docs/usage/parameters"}},d=[{value:"Install",id:"install",children:[],level:2},{value:"Usage",id:"usage",children:[{value:"Examples",id:"examples",children:[],level:3},{value:"Options",id:"options",children:[{value:"<code>ignoreErrors</code>",id:"ignoreerrors",children:[],level:4},{value:"<code>permittableComplexity</code>",id:"permittablecomplexity",children:[],level:4},{value:"<code>timeout</code>",id:"timeout",children:[],level:4},{value:"<code>checker</code>",id:"checker",children:[],level:4}],level:3}],level:2}],m={toc:d};function v(e){var n=e.components,t=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Describes how to use ",(0,i.kt)("inlineCode",{parentName:"p"},"recheck")," as an ESLint plugin."),(0,i.kt)("h2",{id:"install"},"Install"),(0,i.kt)("p",null,"The ESLint plugin package is named ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-plugin-redos"),".\nYou can install the package with the following command."),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"npm",label:"NPM",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev eslint-plugin-redos\n"))),(0,i.kt)(o.Z,{value:"yarb",label:"Yarn",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add --dev eslint-plugin-redos\n")))),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Because it is just an ESLint plugin, you should install ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint")," package of course."))),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("p",null,"To enable the plugin, you should add such a following configuration to your ",(0,i.kt)("inlineCode",{parentName:"p"},".eslintrc.json")," for example."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title=".eslintrc.json"',title:'".eslintrc.json"'},'{\n  "plugins": ["redos"],\n  "rules": {\n    "redos/no-vulnerable": "error"\n  }\n}\n')),(0,i.kt)("p",null,"This plugin contains the only rule ",(0,i.kt)("inlineCode",{parentName:"p"},"redos/no-vulnerable"),"."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("a",{parentName:"p",href:"https://makenowjust-labo.github.io/recheck"},(0,i.kt)("inlineCode",{parentName:"a"},"recheck"))," is a ReDoS vulnerability checker used by this plugin.\nIt is very optimized and fast enough, however it takes seconds in some cases.\nThis time is essential because ReDoS detection is not so easy problem in computer science."),(0,i.kt)("p",{parentName:"div"},"Therefore, to reduce unnecessary computation time, we recommend adding such a following settings."),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title=".eslintrc.json"',title:'".eslintrc.json"'},'{\n  "plugins": ["redos"],\n  "rules": {\n    "redos/no-vulnerable": "error"\n  },\n  "overrides": [\n    {\n      "files": ["**/*.test.js"],\n      "rules": {\n        "redos/no-vulnerable": "off"\n      }\n    }\n  ]\n}\n')),(0,i.kt)("p",{parentName:"div"},"The above settings disables the ",(0,i.kt)("inlineCode",{parentName:"p"},"redos/no-vulnerable")," rule against test files.\nSince ReDoS vulnerabilities in test codes are not critical problems, it will be no problem in many cases."),(0,i.kt)("p",{parentName:"div"},"Alternatively, you can use rules that use lightweight (but imperfect) analysis methods such as ",(0,i.kt)("a",{parentName:"p",href:"https://ota-meshi.github.io/eslint-plugin-regexp/rules/no-super-linear-backtracking.html"},(0,i.kt)("inlineCode",{parentName:"a"},"regexp/no-super-linear-backtracking"))," included in ",(0,i.kt)("inlineCode",{parentName:"p"},"eslint-plugin-regexp")," during development,\nand use this plugin in CI."))),(0,i.kt)("h3",{id:"examples"},"Examples"),(0,i.kt)("p",null,"\ud83d\udc4e Examples of ",(0,i.kt)("strong",{parentName:"p"},"incorrect")," code for this rule:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'/*eslint redos/no-vulnerable: "error"*/\n\n// Exponential times backtracking examples:\n/^(a*)*$/;\n/^(a|a)*$/;\n/^(a|b|ab)*$/;\n\n// Polynomial times backtracking examples:\n/^a*a*$/;\n/^[\\s\\u200c]+|[\\s\\u200c]+$/; // See https://stackstatus.net/post/147710624694/outage-postmortem-july-20-2016.\n')),(0,i.kt)("p",null,"\ud83d\udc4d Examples of ",(0,i.kt)("strong",{parentName:"p"},"correct")," code for this rule:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'/*eslint redos/no-vulnerable: "error"*/\n\n// Fixed times backtracking examples:\n/^a$/;\n/^foo$/;\n\n// Linear times backtracking examples;\n/foo/;\n/(a*)*/;\n')),(0,i.kt)("h3",{id:"options"},"Options"),(0,i.kt)("p",null,"The following is the default configuration."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "redos/no-vulnerable": [\n    "error",\n    {\n      "ignoreErrors": true,\n      "permittableComplexities": [],\n      "timeout": 10000,\n      "checker": "auto"\n    }\n  ]\n}\n')),(0,i.kt)("h4",{id:"ignoreerrors"},(0,i.kt)("inlineCode",{parentName:"h4"},"ignoreErrors")),(0,i.kt)("p",null,"This flag is used to determine to ignore errors on ReDoS vulnerable detection."),(0,i.kt)("p",null,"Errors on ReDoS vulnerable detection are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"the pattern is invalid."),(0,i.kt)("li",{parentName:"ul"},"the pattern is not supported."),(0,i.kt)("li",{parentName:"ul"},"checking is timeout.")),(0,i.kt)("p",null,"They are ignored because they are noisy usually."),(0,i.kt)("h4",{id:"permittablecomplexity"},(0,i.kt)("inlineCode",{parentName:"h4"},"permittableComplexity")),(0,i.kt)("p",null,"This array option controls permittable matching complexity. It allows the following values."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'polynomial'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"'exponential'"))),(0,i.kt)("p",null,"We strongly recommend considering ",(0,i.kt)("inlineCode",{parentName:"p"},"'polynomial'")," matching complexity RegExp as ReDoS vulnerable. However, this option can disable it."),(0,i.kt)("h4",{id:"timeout"},(0,i.kt)("inlineCode",{parentName:"h4"},"timeout")),(0,i.kt)("p",null,"This option specifies a time-out limit for ReDoS analyzing. A time unit is milliseconds. If\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"\xa0is specified, it means unlimited time-out."),(0,i.kt)("p",null,"The default value is ",(0,i.kt)("inlineCode",{parentName:"p"},"10000")," (10 seconds)."),(0,i.kt)("h4",{id:"checker"},(0,i.kt)("inlineCode",{parentName:"h4"},"checker")),(0,i.kt)("p",null,"This option specifies a checker name to use. It is one of ",(0,i.kt)("inlineCode",{parentName:"p"},"'auto'"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"'automaton'")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"'fuzz'"),"."),(0,i.kt)("p",null,"The default value is ",(0,i.kt)("inlineCode",{parentName:"p"},"'auto'"),"."))}v.isMDXComponent=!0}}]);